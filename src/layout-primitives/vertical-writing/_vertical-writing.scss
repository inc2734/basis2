@mixin abstract-vertical-writing() {
  --unitone--gap: var(--unitone--global--text-gap);
  --unitone--column-gap: var(--unitone--global--gap);
  --unitone--max-height: var(--unitone--vertical-writing--max-height, calc(9 * var(--unitone--measure) / 16));
  --unitone--text-orientation: mixed;

  writing-mode: vertical-rl;
  column-count: 1;
  column-gap: var(--unitone--global--gap);
  max-width: 100%;
  width: 100%;
  text-orientation: var(--unitone--text-orientation);

  > * {
    max-inline-size: var(--unitone--max-height);
    inline-size: var(--unitone--max-height); // For Safari
    box-sizing: content-box;
  }

  @media (orientation: portrait) {
    &[data-unitone-layout~="-switch"] {
      column-count: auto;
      width: auto;
      writing-mode: horizontal-tb;

      > * {
        box-sizing: border-box;
        inline-size: auto;
      }
    }
  }

  > *:not(:first-child) {
    margin-block-start: calc(var(--unitone--margin-block-start, 1) * var(--unitone--gap));
  }

  > *:not(:last-child) {
    margin-block-end: calc(var(--unitone--margin-block-end, 1) * var(--unitone--gap));
  }

  > h1 {
    --unitone--font-size: 4;
  }

  > :where(h2, h3, h4, h5, h6) {
    --unitone--margin-block-start: 2;

    & + :where(h2, h3, h4, h5, h6) {
      --unitone--margin-block-start: 1;
    }
  }

  > h2 {
    --unitone--font-size: 3;
  }

  > h3 {
    --unitone--font-size: 2;
  }

  > h4 {
    --unitone--font-size: 1;
  }

  > h5 {
    --unitone--font-size: 0;

    & + * {
      --unitone--margin-block-start: .5;
    }
  }

  > h6 {
    --unitone--font-size: 0;

    & + * {
      --unitone--margin-block-start: .5;
    }
  }
}

@mixin vertical-writing() {
  [data-unitone-layout~="vertical-writing"] {
    @include abstract-vertical-writing();
  }
}
