@mixin abstract-text() {
  --max-width: var(--measure);

  > * {
    --gap: var(--s1);
    margin: 0 auto;
  }

  > *:not(:first-child) {
    margin-top: calc(var(--margin-top, 1) * var(--gap));
  }

  > *:not(:last-child) {
    margin-bottom: calc(var(--margin-bottom, 1) * var(--gap));
  }

  > h1 {
    --font-size: 4;
  }

  > :where(h2, h3, h4, h5, h6) {
    --margin-bottom: 0;

    & + :where(h2, h3, h4, h5, h6) {
      --margin-top: .5;
    }
  }

  > h2 {
    --font-size: 3;
  }

  > h3 {
    --font-size: 2;
  }

  > h4 {
    --font-size: 1;
  }

  > h5 {
    --font-size: 0;

    & + * {
      --margin-top: .5;
    }
  }

  > h6 {
    --font-size: 0;

    & + * {
      --margin-top: .5;
    }
  }
}

@mixin text() {
  [data-layout~="text"] {
    @include abstract-text();
  }

  :where([data-layout~="text"] > *) {
    max-width: min(100%, var(--max-width));
  }

  :where([data-layout~="text"][data-layout~="-center"]) > * {
    width: fit-content;
  }

  [data-layout~="text"]:lang(ja) {
    font-feature-settings: "palt" 0;
    font-kerning: none;

    > :where(h1, h2, h3, h4, h5) {
      font-feature-settings: "palt" 1;
      font-kerning: normal;
    }
  }
}
